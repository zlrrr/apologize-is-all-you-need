# ğŸ”§ ä¿®å¤ Vercel ç¯å¢ƒå˜é‡ - ç«‹å³æ“ä½œæŒ‡å—

## é—®é¢˜è¯Šæ–­

**ç°è±¡**ï¼šå‰ç«¯è®¿é—® `http://localhost:5001/api/auth/status` è€Œä¸æ˜¯çœŸå®åç«¯åœ°å€

**æ ¹æœ¬åŸå› **ï¼šVercel ç¯å¢ƒå˜é‡ `VITE_API_URL` æœªè®¾ç½®æˆ–æœªç”Ÿæ•ˆ

**è§£å†³æ–¹æ¡ˆ**ï¼šåœ¨ Vercel Dashboard è®¾ç½®ç¯å¢ƒå˜é‡å¹¶é‡æ–°éƒ¨ç½²

---

## ğŸš€ ç«‹å³æ‰§è¡Œæ­¥éª¤ï¼ˆ5 åˆ†é’Ÿå®Œæˆï¼‰

### æ­¥éª¤ 1ï¼šç™»å½• Vercel Dashboard

1. æµè§ˆå™¨æ‰“å¼€ï¼šhttps://vercel.com/dashboard
2. ç™»å½•æ‚¨çš„è´¦å·
3. æ‰¾åˆ°é¡¹ç›® `apologize-is-all-you-need-web`ï¼ˆæˆ–ç±»ä¼¼åç§°ï¼‰
4. ç‚¹å‡»é¡¹ç›®å¡ç‰‡è¿›å…¥é¡¹ç›®è¯¦æƒ…é¡µ

---

### æ­¥éª¤ 2ï¼šé…ç½®ç¯å¢ƒå˜é‡

1. åœ¨é¡¹ç›®è¯¦æƒ…é¡µï¼Œç‚¹å‡»é¡¶éƒ¨å¯¼èˆªæ çš„ **"Settings"** æ ‡ç­¾

2. åœ¨å·¦ä¾§èœå•ä¸­ï¼Œç‚¹å‡» **"Environment Variables"**

3. æ£€æŸ¥æ˜¯å¦å·²æœ‰ `VITE_API_URL` å˜é‡ï¼š

#### æƒ…å†µ Aï¼šæ²¡æœ‰ VITE_API_URL å˜é‡

**æ“ä½œ**ï¼šæ·»åŠ æ–°çš„ç¯å¢ƒå˜é‡

1. åœ¨é¡µé¢ä¸­æ‰¾åˆ° "Add New" æŒ‰é’®ï¼ˆæˆ– "Create" æŒ‰é’®ï¼‰
2. å¡«å†™è¡¨å•ï¼š
   ```
   Name (å˜é‡å): VITE_API_URL

   Value (å€¼): https://apologize-is-all-you-need.onrender.com

   Environments (ç¯å¢ƒ):
   â˜‘ Production
   â˜‘ Preview
   â˜‘ Development
   ```
   **é‡è¦**ï¼šç¡®ä¿å‹¾é€‰æ‰€æœ‰ä¸‰ä¸ªç¯å¢ƒï¼

3. ç‚¹å‡» **"Save"** æˆ– **"Add"** æŒ‰é’®

4. âœ… ç¯å¢ƒå˜é‡å·²æ·»åŠ ï¼Œ**ç»§ç»­åˆ°æ­¥éª¤ 3**

---

#### æƒ…å†µ Bï¼šå·²æœ‰ VITE_API_URL å˜é‡ä½†å€¼ä¸å¯¹

**æ“ä½œ**ï¼šä¿®æ”¹ç¯å¢ƒå˜é‡

1. æ‰¾åˆ°ç°æœ‰çš„ `VITE_API_URL` å˜é‡
2. ç‚¹å‡»å³ä¾§çš„ **"Edit"** æŒ‰é’®ï¼ˆæˆ– "..." èœå• â†’ Editï¼‰
3. ä¿®æ”¹ Value ä¸ºï¼š`https://apologize-is-all-you-need.onrender.com`
4. ç¡®ä¿ Environments å‹¾é€‰äº†ï¼šProduction, Preview, Development
5. ç‚¹å‡» **"Save"**

6. âœ… ç¯å¢ƒå˜é‡å·²æ›´æ–°ï¼Œ**ç»§ç»­åˆ°æ­¥éª¤ 3**

---

### æ­¥éª¤ 3ï¼šé‡æ–°éƒ¨ç½²å‰ç«¯ï¼ˆå…³é”®ï¼ï¼‰

**é‡è¦**ï¼šä¿®æ”¹ç¯å¢ƒå˜é‡åï¼Œå¿…é¡»é‡æ–°éƒ¨ç½²æ‰èƒ½ç”Ÿæ•ˆï¼

#### æ–¹æ³• 1ï¼šé€šè¿‡ Deployments é¡µé¢é‡æ–°éƒ¨ç½²ï¼ˆæ¨èï¼‰

1. ç‚¹å‡»é¡¶éƒ¨å¯¼èˆªæ çš„ **"Deployments"** æ ‡ç­¾

2. æ‰¾åˆ°æœ€æ–°çš„éƒ¨ç½²è®°å½•ï¼ˆç¬¬ä¸€æ¡ï¼Œé¡¶éƒ¨ï¼‰

3. ç‚¹å‡»è¯¥éƒ¨ç½²è®°å½•å³ä¾§çš„ **"..."** èœå•æŒ‰é’®

4. åœ¨ä¸‹æ‹‰èœå•ä¸­ï¼Œé€‰æ‹© **"Redeploy"**

5. åœ¨å¼¹å‡ºçš„ç¡®è®¤å¯¹è¯æ¡†ä¸­ï¼š
   - ç¡®è®¤å‹¾é€‰ **"Use existing Build Cache"**ï¼ˆå¯é€‰ï¼ŒåŠ å¿«éƒ¨ç½²ï¼‰
   - ç‚¹å‡» **"Redeploy"** æŒ‰é’®ç¡®è®¤

6. ç­‰å¾…éƒ¨ç½²å®Œæˆï¼ˆé€šå¸¸ 1-2 åˆ†é’Ÿï¼‰
   - é¡µé¢ä¼šæ˜¾ç¤ºéƒ¨ç½²è¿›åº¦
   - çœ‹åˆ° âœ… "Ready" çŠ¶æ€å³ä¸ºæˆåŠŸ

---

#### æ–¹æ³• 2ï¼šæ¨é€æ–°çš„ Git Commit è§¦å‘éƒ¨ç½²ï¼ˆå¤‡é€‰ï¼‰

å¦‚æœ Redeploy æŒ‰é’®æ‰¾ä¸åˆ°ï¼Œå¯ä»¥æ¨é€ä¸€ä¸ªç©ºæäº¤ï¼š

```bash
cd frontend
git commit --allow-empty -m "Trigger Vercel redeploy with updated env vars"
git push
```

Vercel ä¼šè‡ªåŠ¨æ£€æµ‹åˆ°æ¨é€å¹¶å¼€å§‹éƒ¨ç½²ã€‚

---

### æ­¥éª¤ 4ï¼šéªŒè¯ä¿®å¤æˆåŠŸ

#### 4.1 ç­‰å¾…éƒ¨ç½²å®Œæˆ

åœ¨ Vercel Deployments é¡µé¢ï¼Œç­‰å¾…çœ‹åˆ°ï¼š
```
âœ… Ready
Production: https://apologize-is-all-you-need-web.vercel.app
```

éƒ¨ç½²é€šå¸¸éœ€è¦ **1-3 åˆ†é’Ÿ**ã€‚

---

#### 4.2 æµ‹è¯•å‰ç«¯è¿æ¥

**æµ‹è¯• 1**ï¼šæ‰“å¼€å‰ç«¯é¡µé¢
```
æµè§ˆå™¨è®¿é—®ï¼šhttps://apologize-is-all-you-need-web.vercel.app
```

**æµ‹è¯• 2**ï¼šæ£€æŸ¥ç¯å¢ƒå˜é‡ï¼ˆæµè§ˆå™¨æ§åˆ¶å°ï¼‰

1. åœ¨å‰ç«¯é¡µé¢ï¼ŒæŒ‰ **F12** æ‰“å¼€å¼€å‘è€…å·¥å…·
2. åˆ‡æ¢åˆ° **"Console"** æ ‡ç­¾
3. è¾“å…¥ä»¥ä¸‹å‘½ä»¤å¹¶æŒ‰å›è½¦ï¼š
   ```javascript
   console.log(import.meta.env.VITE_API_URL)
   ```

**æœŸæœ›è¾“å‡º**ï¼š
```
https://apologize-is-all-you-need.onrender.com
```

**å¦‚æœä»æ˜¾ç¤º undefined**ï¼š
- æ¸…é™¤æµè§ˆå™¨ç¼“å­˜ï¼ˆCtrl+Shift+R å¼ºåˆ¶åˆ·æ–°ï¼‰
- æˆ–ç­‰å¾…å‡ åˆ†é’Ÿè®© Vercel CDN æ›´æ–°
- æˆ–æ£€æŸ¥ç¯å¢ƒå˜é‡æ˜¯å¦æ­£ç¡®ä¿å­˜

---

**æµ‹è¯• 3**ï¼šæ£€æŸ¥ç½‘ç»œè¯·æ±‚

1. åœ¨å¼€å‘è€…å·¥å…·ä¸­ï¼Œåˆ‡æ¢åˆ° **"Network"** æ ‡ç­¾
2. åˆ·æ–°é¡µé¢ï¼ˆF5 æˆ– Ctrl+Rï¼‰
3. åœ¨ Network åˆ—è¡¨ä¸­ï¼Œæ‰¾åˆ°å¯¹ `/api/health` æˆ– `/api/auth/status` çš„è¯·æ±‚
4. ç‚¹å‡»è¯¥è¯·æ±‚ï¼ŒæŸ¥çœ‹ "Headers" æ ‡ç­¾

**æœŸæœ›çœ‹åˆ°**ï¼š
```
Request URL: https://apologize-is-all-you-need.onrender.com/api/auth/status
```

**å¦‚æœä»æ˜¯ localhost:5001**ï¼š
- ç¡®è®¤æ­¥éª¤ 3 ä¸­ç¡®å®é‡æ–°éƒ¨ç½²äº†
- æ¸…é™¤æµè§ˆå™¨ç¼“å­˜å¹¶å¼ºåˆ¶åˆ·æ–°

---

**æµ‹è¯• 4**ï¼šæ£€æŸ¥æœåŠ¡çŠ¶æ€æŒ‡ç¤ºå™¨

å‰ç«¯é¡µé¢åº”è¯¥æ˜¾ç¤ºï¼š

âœ… **æˆåŠŸçš„è¯**ï¼š
```
âœ… åç«¯æœåŠ¡: æ­£å¸¸
âœ… LLMæœåŠ¡: æ­£å¸¸ï¼ˆæˆ– âš ï¸ éœ€é…ç½®ï¼‰
```

âŒ **å¦‚æœä»æ˜¾ç¤ºä¸å¯ç”¨**ï¼š
```
âŒ åç«¯æœåŠ¡: ä¸å¯ç”¨
```

å¦‚æœä»æ˜¾ç¤ºä¸å¯ç”¨ï¼Œå¯èƒ½æ˜¯ï¼š
1. åç«¯ä»è¿”å› 403ï¼ˆéœ€è¦è§£å†³åç«¯é—®é¢˜ï¼‰
2. CORS é…ç½®é—®é¢˜ï¼ˆéœ€è¦æ£€æŸ¥åç«¯ CORS è®¾ç½®ï¼‰
3. åç«¯æœåŠ¡ä¼‘çœ ä¸­ï¼ˆç­‰å¾… 30-60 ç§’å”¤é†’ï¼‰

---

## ğŸ“Š å®Œæ•´æ£€æŸ¥æ¸…å•

è¯·é€é¡¹ç¡®è®¤ï¼š

```
â˜ 1. Vercel Dashboard ä¸­å·²æ·»åŠ  VITE_API_URL ç¯å¢ƒå˜é‡
â˜ 2. å˜é‡å€¼ä¸ºï¼šhttps://apologize-is-all-you-need.onrender.com
â˜ 3. å·²å‹¾é€‰ Production, Preview, Development ä¸‰ä¸ªç¯å¢ƒ
â˜ 4. å·²ç‚¹å‡» Save ä¿å­˜ç¯å¢ƒå˜é‡
â˜ 5. å·²åœ¨ Deployments é¡µé¢ç‚¹å‡» Redeploy
â˜ 6. éƒ¨ç½²çŠ¶æ€æ˜¾ç¤º "Ready"
â˜ 7. æµè§ˆå™¨æ§åˆ¶å°æ˜¾ç¤ºæ­£ç¡®çš„ VITE_API_URL
â˜ 8. Network æ ‡ç­¾æ˜¾ç¤ºè¯·æ±‚å‘é€åˆ° Render åç«¯è€Œé localhost
â˜ 9. å‰ç«¯æœåŠ¡çŠ¶æ€æŒ‡ç¤ºå™¨æ˜¾ç¤º"æ­£å¸¸"æˆ–å¯ä»¥çœ‹åˆ°å…·ä½“çŠ¶æ€
```

æ‰€æœ‰é¡¹éƒ½ âœ… = é—®é¢˜è§£å†³ï¼

---

## ğŸ” æ•…éšœæ’é™¤

### é—®é¢˜ 1ï¼šæ‰¾ä¸åˆ° Environment Variables èœå•

**ä½ç½®ç¡®è®¤**ï¼š
- Vercel Dashboard â†’ ç‚¹å‡»é¡¹ç›® â†’ Settings æ ‡ç­¾ â†’ å·¦ä¾§èœå•
- å¦‚æœæ‰¾ä¸åˆ°ï¼Œå°è¯•åˆ·æ–°é¡µé¢
- æˆ–è€…ç›´æ¥è®¿é—®ï¼š`https://vercel.com/[ä½ çš„ç”¨æˆ·å]/[é¡¹ç›®å]/settings/environment-variables`

---

### é—®é¢˜ 2ï¼šä¿å­˜ç¯å¢ƒå˜é‡åæ²¡æœ‰ Redeploy æŒ‰é’®

**è§£å†³æ–¹æ¡ˆ A**ï¼šVercel ä¼šæç¤ºé‡æ–°éƒ¨ç½²
- ä¿å­˜ç¯å¢ƒå˜é‡åï¼Œé¡µé¢é¡¶éƒ¨å¯èƒ½å‡ºç°æ¨ªå¹…æç¤º
- ç‚¹å‡»æ¨ªå¹…ä¸­çš„ "Redeploy" é“¾æ¥

**è§£å†³æ–¹æ¡ˆ B**ï¼šæ‰‹åŠ¨è§¦å‘
- Deployments æ ‡ç­¾ â†’ æœ€æ–°éƒ¨ç½² â†’ ... èœå• â†’ Redeploy

**è§£å†³æ–¹æ¡ˆ C**ï¼šä½¿ç”¨ Git æ¨é€
- æ¨é€ä¸€ä¸ªæ–°çš„ commit åˆ°åˆ†æ”¯

---

### é—®é¢˜ 3ï¼šé‡æ–°éƒ¨ç½²åä»è®¿é—® localhost

**åŸå› **ï¼šæµè§ˆå™¨ç¼“å­˜

**è§£å†³**ï¼š
1. æŒ‰ **Ctrl+Shift+Delete** æ‰“å¼€æ¸…é™¤ç¼“å­˜å¯¹è¯æ¡†
2. é€‰æ‹©"ç¼“å­˜çš„å›¾ç‰‡å’Œæ–‡ä»¶"
3. ç‚¹å‡»"æ¸…é™¤æ•°æ®"
4. æˆ–ç›´æ¥æŒ‰ **Ctrl+Shift+R** å¼ºåˆ¶åˆ·æ–°é¡µé¢

---

### é—®é¢˜ 4ï¼šconsole.log ä»æ˜¾ç¤º undefined

**æ£€æŸ¥æ­¥éª¤**ï¼š

1. ç¡®è®¤ç¯å¢ƒå˜é‡åæ‹¼å†™å®Œå…¨æ­£ç¡®ï¼š`VITE_API_URL`ï¼ˆæ³¨æ„å¤§å°å†™ï¼‰
2. ç¡®è®¤ç¡®å®é‡æ–°éƒ¨ç½²äº†ï¼ˆDeployments ä¸­æœ‰æ–°çš„éƒ¨ç½²è®°å½•ï¼‰
3. ç­‰å¾… 2-3 åˆ†é’Ÿè®©éƒ¨ç½²å®Œå…¨ç”Ÿæ•ˆ
4. æ¸…é™¤æµè§ˆå™¨ç¼“å­˜
5. åœ¨ Vercel Deployments é¡µé¢ï¼Œç‚¹å‡»æœ€æ–°éƒ¨ç½² â†’ "View Build Logs"
   - æŸ¥æ‰¾åŒ…å« "VITE_API_URL" çš„æ—¥å¿—è¡Œ
   - ç¡®è®¤æ„å»ºæ—¶ç¯å¢ƒå˜é‡å­˜åœ¨

---

### é—®é¢˜ 5ï¼šè¯·æ±‚å‘é€åˆ° Render ä½†ä»æ˜¾ç¤º"ä¸å¯ç”¨"

**å¯èƒ½åŸå› **ï¼šåç«¯é—®é¢˜

è¿™ç§æƒ…å†µä¸‹ï¼Œç¯å¢ƒå˜é‡é…ç½®æ­£ç¡®ï¼Œä½†éœ€è¦è§£å†³åç«¯é—®é¢˜ï¼š

**æ£€æŸ¥ A**ï¼šåç«¯æ˜¯å¦è¿”å› 403
```bash
curl https://apologize-is-all-you-need.onrender.com/api/health
```

**å¦‚æœè¿”å› 403**ï¼šéœ€è¦è§£å†³åç«¯éƒ¨ç½²é—®é¢˜ï¼ˆè§å…¶ä»–æ–‡æ¡£ï¼‰

**æ£€æŸ¥ B**ï¼šCORS é…ç½®
- åç«¯å¯èƒ½é˜»æ­¢äº†æ¥è‡ª Vercel çš„è·¨åŸŸè¯·æ±‚
- éœ€è¦åœ¨ Render ç¯å¢ƒå˜é‡ä¸­è®¾ç½®ï¼š
  ```
  CORS_ORIGIN=https://apologize-is-all-you-need-web.vercel.app
  ```

**æ£€æŸ¥ C**ï¼šåç«¯æœåŠ¡ä¼‘çœ 
- Render å…è´¹è®¡åˆ’ä¼šåœ¨ 15 åˆ†é’Ÿä¸æ´»åŠ¨åä¼‘çœ 
- é¦–æ¬¡è®¿é—®éœ€è¦ç­‰å¾… 30-60 ç§’å”¤é†’
- ç­‰å¾…ç‰‡åˆ»ååˆ·æ–°å‰ç«¯é¡µé¢

---

## â±ï¸ é¢„æœŸæ—¶é—´

- **è®¾ç½®ç¯å¢ƒå˜é‡**ï¼š1-2 åˆ†é’Ÿ
- **é‡æ–°éƒ¨ç½²å‰ç«¯**ï¼š1-3 åˆ†é’Ÿ
- **éªŒè¯æˆåŠŸ**ï¼š1 åˆ†é’Ÿ
- **æ€»è®¡**ï¼š3-6 åˆ†é’Ÿ

---

## âœ… æˆåŠŸæ ‡å¿—

å®Œæˆåï¼Œæ‚¨åº”è¯¥çœ‹åˆ°ï¼š

1. **Vercel Environment Variables é¡µé¢**ï¼š
   ```
   VITE_API_URL = https://apologize-is-all-you-need.onrender.com
   Environments: Production, Preview, Development
   ```

2. **Vercel Deployments é¡µé¢**ï¼š
   ```
   âœ… Ready (æœ€æ–°éƒ¨ç½²)
   Production: https://apologize-is-all-you-need-web.vercel.app
   ```

3. **æµè§ˆå™¨æ§åˆ¶å°**ï¼š
   ```javascript
   > console.log(import.meta.env.VITE_API_URL)
   "https://apologize-is-all-you-need.onrender.com"
   ```

4. **å‰ç«¯é¡µé¢**ï¼š
   ```
   âœ… åç«¯æœåŠ¡: æ­£å¸¸
   âœ… LLMæœåŠ¡: æ­£å¸¸ï¼ˆæˆ–éœ€é…ç½®ï¼‰
   ```

5. **Network è¯·æ±‚**ï¼š
   ```
   Request URL: https://apologize-is-all-you-need.onrender.com/api/...
   Status: 200 OK
   ```

---

## ğŸš€ ç°åœ¨å¼€å§‹æ“ä½œ

**è¯·ç«‹å³æ‰§è¡Œ**ï¼š
1. æ‰“å¼€ https://vercel.com/dashboard
2. æ‰¾åˆ°é¡¹ç›® â†’ Settings â†’ Environment Variables
3. æ·»åŠ  `VITE_API_URL = https://apologize-is-all-you-need.onrender.com`
4. Deployments â†’ Redeploy
5. ç­‰å¾… 2-3 åˆ†é’Ÿ
6. åˆ·æ–°å‰ç«¯é¡µé¢æµ‹è¯•

**æ“ä½œå®Œæˆåï¼Œè¯·å‘Šè¯‰æˆ‘**ï¼š
- âœ… ç¯å¢ƒå˜é‡å·²è®¾ç½®
- âœ… å·²é‡æ–°éƒ¨ç½²
- âœ… console.log æ˜¾ç¤ºæ­£ç¡®çš„ URL
- âœ… å‰ç«¯æœåŠ¡çŠ¶æ€ï¼ˆæ˜¾ç¤ºä»€ä¹ˆï¼Ÿï¼‰

æˆ‘ä¼šæ ¹æ®æ‚¨çš„åé¦ˆç»§ç»­ååŠ©è§£å†³ä»»ä½•å‰©ä½™é—®é¢˜ï¼ğŸ’ª
